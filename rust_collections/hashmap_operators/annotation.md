/\*
ä¸‹é¢æˆ‘æŒ‰ **é€è¡Œ + å…³é”®æ¦‚å¿µ** çš„æ–¹å¼æ¥è§£è¯»è¿™æ®µ Rust ä»£ç ï¼Œé‡ç‚¹è§£é‡Š `HashMap::entry`ã€å€Ÿç”¨ã€ä»¥åŠ `or_insert` çš„å·¥ä½œæœºåˆ¶ã€‚

---

## 1ï¸âƒ£ å­—ç¬¦ä¸²å®šä¹‰

```rust
let text = "hello world wonderful world";
```

- `text` çš„ç±»å‹æ˜¯ï¼š`&'static str`
- è¿™æ˜¯ä¸€ä¸ª**å­—ç¬¦ä¸²åˆ‡ç‰‡**ï¼Œå†…å®¹åœ¨ç¼–è¯‘æœŸå°±å·²ç¡®å®š
- ç”±äºæ˜¯ `&str`ï¼Œåç»­åˆ†å‰²å‡ºæ¥çš„ `word` ä¹Ÿéƒ½æ˜¯ `&str`ï¼ˆä¸æ˜¯ `String`ï¼‰

---

## 2ï¸âƒ£ åˆ›å»º HashMap

```rust
let mut map = HashMap::new();
```

- `map` çš„ç±»å‹ä¼šè¢« **ç±»å‹æ¨æ–­** ä¸ºï¼š

```rust
HashMap<&str, i32>
```

åŸå› ï¼š

- `word` æ˜¯ `&str`
- `or_insert(0)` ä¸­çš„ `0` æ˜¯æ•´æ•°ï¼Œé»˜è®¤æ¨æ–­ä¸º `i32`

---

## 3ï¸âƒ£ æŒ‰ç©ºæ ¼åˆ†å‰²å­—ç¬¦ä¸²

```rust
for word in text.split_whitespace() {
```

### `split_whitespace()` çš„ä½œç”¨

- æŒ‰**ä»»æ„è¿ç»­ç©ºç™½å­—ç¬¦**ï¼ˆç©ºæ ¼ã€æ¢è¡Œã€åˆ¶è¡¨ç¬¦ï¼‰åˆ†å‰²
- è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œç±»å‹æ˜¯ï¼š

```rust
std::str::SplitWhitespace<'_>
```

### è¿­ä»£å¾—åˆ°çš„ `word`

- `word` çš„ç±»å‹æ˜¯ï¼š`&str`
- æ¯æ¬¡å¾ªç¯ä¾æ¬¡å¾—åˆ°ï¼š
  - `"hello"`
  - `"world"`
  - `"wonderful"`
  - `"world"`

---

## 4ï¸âƒ£ HashMap çš„æ ¸å¿ƒé€»è¾‘ï¼ˆé‡ç‚¹ï¼‰

```rust
let count = map.entry(word).or_insert(0);
```

è¿™æ˜¯æ•´æ®µä»£ç æœ€å…³é”®çš„ä¸€è¡Œã€‚

### 4.1 `entry(word)`

```rust
map.entry(word)
```

- è¿”å›ä¸€ä¸ª `Entry` æšä¸¾ï¼š

```rust
Entry::Occupied(_) æˆ– Entry::Vacant(_)
```

å«ä¹‰ï¼š

- **Occupied**ï¼š`word` å·²ç»å­˜åœ¨äº `map` ä¸­
- **Vacant**ï¼š`word` è¿˜ä¸å­˜åœ¨

---

### 4.2 `or_insert(0)`

```rust
.or_insert(0)
```

ç­‰ä»·é€»è¾‘ï¼ˆä¼ªä»£ç ï¼‰ï¼š

```rust
if key å­˜åœ¨ {
    è¿”å›è¯¥ key å¯¹åº” value çš„å¯å˜å¼•ç”¨
} else {
    æ’å…¥ key -> 0
    è¿”å›æ–°æ’å…¥ value çš„å¯å˜å¼•ç”¨
}
```

ğŸ‘‰ **è¿”å›å€¼ç±»å‹ï¼š**

```rust
&mut i32
```

ä¹Ÿå°±æ˜¯è¯´ï¼š

```rust
count: &mut i32
```

---

## 5ï¸âƒ£ è®¡æ•°ç´¯åŠ ï¼ˆè§£å¼•ç”¨ï¼‰

```rust
*count += 1;
```

### ä¸ºä»€ä¹ˆè¦ `*`ï¼Ÿ

- `count` æ˜¯ `&mut i32`
- `*count` æ˜¯å¯¹è¯¥å¼•ç”¨çš„**è§£å¼•ç”¨**

ç­‰ä»·äºï¼š

```rust
*count = *count + 1;
```

å¦‚æœè¿™æ˜¯è¯¥å•è¯ç¬¬ä¸€æ¬¡å‡ºç°ï¼š

- åˆå§‹å€¼æ˜¯ `0`
- åŠ  1 åå˜æˆ `1`

---

## 6ï¸âƒ£ æœ€ç»ˆ map çš„å†…å®¹

å­—ç¬¦ä¸²æ˜¯ï¼š

```
hello world wonderful world
```

ç»Ÿè®¡ç»“æœä¸ºï¼š

```text
hello      -> 1
world      -> 2
wonderful  -> 1
```

---

## 7ï¸âƒ£ è¾“å‡ºç»“æœ

```rust
println!("{:#?}", map);
```

- `{:#?}` æ˜¯ **ç¾åŒ– Debug è¾“å‡º**
- å¯èƒ½çš„è¾“å‡ºï¼ˆé¡ºåºä¸å›ºå®šï¼Œå› ä¸º HashMap æ— åºï¼‰ï¼š

```rust
{
    "hello": 1,
    "world": 2,
    "wonderful": 1,
}
```

---

## 8ï¸âƒ£ æ€»ç»“ä¸€å¥è¯ç‰ˆ

> è¿™æ®µä»£ç é€šè¿‡ `split_whitespace` éå†å­—ç¬¦ä¸²ä¸­çš„å•è¯ï¼Œåˆ©ç”¨ `HashMap::entry + or_insert` åœ¨ **ä¸€æ¬¡æŸ¥æ‰¾ä¸­å®Œæˆâ€œå­˜åœ¨åˆ™ä¿®æ”¹ï¼Œä¸å­˜åœ¨åˆ™æ’å…¥â€** çš„è¯é¢‘ç»Ÿè®¡ã€‚

å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘ä¹Ÿå¯ä»¥ï¼š

- âœ¨ æ”¹å†™æˆ **ä¸ç”¨ entry çš„ç‰ˆæœ¬**
- âœ¨ è®²æ¸…æ¥š **å€Ÿç”¨æ£€æŸ¥å™¨åœ¨è¿™é‡Œæ˜¯å¦‚ä½•å·¥ä½œçš„**
- âœ¨ æ”¹æˆ `String` ç‰ˆæœ¬ï¼Œé¿å…ç”Ÿå‘½å‘¨æœŸé—®é¢˜

\*/
